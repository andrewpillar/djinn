

# The host on which the server will be running, used for OAuth redirects and
# webhooks.
host = "https://localhost:8443"

# List the drivers that you want to support on the Djinn CI server. Each driver
# will be submitted onto its own queue for processing. The queues used for
# processing will be in the format of "builds_driver", where driver is the name
# of the driver being used for that build, for example "builds_docker" or
# "builds_qemu-x86_64".
drivers = [
	"docker",
	"qemu-x86_64",
]

# When set to true share_queue will place every build onto the same queue
# regardless of the driver being used for that build. This is beneficial for
# simpler deployments where you want a single worker deployed for executing
# builds with multiple drivers. The "builds" queue will be used for executing
# the build when this option is set.
share_queue = true

# The address to serve on.
[net]
listen = "localhost:8443"

# Server over TLS.
[net.ssl]
cert = "/var/lib/ssl/server.crt"
key  = "/var/lib/ssl/server.key"

[crypto]

# The hash key is used to authenticate values using HMAC. This must be either
# 32, or 64 characters in length.
hash  = "1a2b3c4d5e6f7g8h1a2b3c4d5e6f7g8h"

# The block key is required for encrypting data. This must be either, 16, 24,
# or 32 characters in length.
block = "1a2b3c4d5e6f7g8h"

# The salt to use when generating hard to guess secrets.
salt  = "1a2b3c4d5e6f7g8h"

# The key to use to protect against CSRF attacks. This must be 32
# characters long.
auth  = "1a2b3c4d5e6f7g8h1a2b3c4d5e6f7g8h"

[database]
addr     = "localhost:5432"
name     = "djinn"
username = "djinn-server"
password = "secret"

[redis]
addr = "localhost:6379"

# Where to store the uploaded driver images.Each driver will have a
# sub-directory containing driver specific images, for example,
#
#   /var/lib/djinn/images/<driver>/
#
# the base driver images should be in a _base directory for the given driver
# type,
#
#   /var/lib/djinn/images/<driver>/_base/
[images]
type = "file"
path = "/var/lib/djinn/images"

# Where to look when downloading build artifacts.
[artifacts]
type = "file"
path = "/var/lib/djinn/artifacts"

# Where to store the uploaded build objects.
[objects]
type  = "file"
path  = "/var/lib/djinn/objects"

# Specify the maximum size of objects that can be uploaded in bytes. Set to 0
# to have no limit.
limit = 5000000

[log]
level = "info"
file  = "/var/log/djinn/server.log"

# Configure the Git providers you want to support integrations with. Each
# provider listed below will allow users to either login using their respective
# accounts, or connect their Djinn accounts to them.
[[providers]]
name          = "github"
secret        = "123456"
client_id     = "1a2b3c4d"
client_secret = "1a2b3c4d5e6f7g8h9i0k"

[[providers]]
name          = "gitlab"
secret        = "123456"
client_id     = "1a2b3c4d"
client_secret = "1a2b3c4d5e6f7g8h9i0k"
