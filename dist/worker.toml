

# The number of builds to run in parallel. Set to 0 to use the number of CPU
# cores available.
parallelism = 0

# The queue to pop the builds from.
queue = "builds"

# The duration after which builds should be killed.
# Valid time units are "ns", "us", "ms", "s", "m", "h".
timeout = "30m"

[crypto]
# The block key is required for encrypting data. This must be either, 16, 24,
# or 32 characters in length. This should be the same as what's in server.toml.
block = "1a2b3c4d5e6f7g8h"

# If SMTP is configured for the worker, then this will allow the worker to send
# mail to users about any builds that may have been killed, failed, or timed
# out.
[smtp]
# The address of the SMTP server to use for sending mail.
addr     = "smtp.example.com:587"

# If connecting via TLS, then path to the file that contains a set of root
# certificate authorities.
ca       = "/etc/ssl/cert.pem"

# Admin will be the email of the postmaster. This will be the email used in the
# From field of mails that are sent. Typically set this to noreply@<hostname>.
admin    = "noreply@example.com"

# The username and password to use if authentication is required when connecting
# to the SMTP server.
username = "postmaster@example.com"
password = "1a2b3c4d"

[database]
addr     = "localhost:5432"
name     = "djinn-worker"
username = "djinn"
password = "secret"

[redis]
addr = "localhost:6379"

# Where the different driver images are stored to by user by the worker. Each
# driver will have a sub-directory containing driver specific images, for
# example,
#
#   /var/lib/djinn/images/<driver>/
#
# the base driver images should be in a _base directory for the given driver
# type,
#
#   /var/lib/djinn/images/<driver>/_base/
[images]
type = "file"
path = "/var/lib/djinn/images"

# Where to store collected build artifacts.
[artifacts]
type = "file"
path = "/var/lib/djinn/artifacts"

# The artifact limit denotes the maximum size of an individual artifact that
# can be collected. Any artifact that exceeds this limit will only have the n
# number of bytes collected, where n is the limit. Set to 0 for no limit.
limit = 5000000

# Where to look when placing objects into a build environment.
[objects]
type  = "file"
path  = "/var/lib/djinn/objects"

[log]
level = "info"
file  = "/var/log/djinn/worker.log"

# Configure the Git providers you want to support integrations with. Each
# provider listed below will allow users to either login using their respective
# accounts, or connect their Djinn accounts to them.
[[providers]]
name          = "github"
secret        = "123456"
client_id     = "1a2b3c4d"
client_secret = "1a2b3c4d5e6f7g8h9i0k"

[[providers]]
name          = "gitlab"
secret        = "123456"
client_id     = "1a2b3c4d"
client_secret = "1a2b3c4d5e6f7g8h9i0k"
